<template>
  <b-container class="homeMain" style="position:relative">
    <!-- loading -->
    <!-- <spinner ref="spinner"></spinner> -->
    <b-row align-h="center">
      <b-col md="10">
        <!-- 面包屑 -->
        <b-breadcrumb style="font-size:0.8rem">
          <b-breadcrumb-item href="#/">
            <b-icon icon="house-fill" scale="1.25" shift-v="0" aria-hidden="true"></b-icon>主页
          </b-breadcrumb-item>
          <b-breadcrumb-item active>文章详情</b-breadcrumb-item>
        </b-breadcrumb>
        <!-- 头部图片 -->
        <b-img :src="imgSrc" class="mx-auto handimg"></b-img>
        <hr style="width:100%" />
        <!-- 标题 -->
        <h2 style="margin:25px 0px">{{ title }}</h2>
        <!-- 内容 -->
        <div class="ql-snow">
          <p v-html="content" class="ql-editor"></p>
        </div>
        <hr />
        <b-container>
          <b-row>
            <!-- 作者 -->
            <b-col cols="6" md="2">
              <span>
                <svg
                  t="1583652520770"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="1743"
                  width="25"
                  height="25"
                >
                  <path
                    d="M789.504 890.368H319.488c-18.432 0-33.28 14.848-33.28 33.28s14.848 33.28 33.28 33.28h470.016c18.432 0 33.28-14.848 33.28-33.28s-14.848-33.28-33.28-33.28z"
                    fill="#1296db"
                    p-id="1744"
                    data-spm-anchor-id="a313x.7781069.0.i0"
                    class
                  />
                  <path
                    d="M731.648 392.192c68.096-118.272 79.36-283.136 79.872-289.792 1.024-12.288-5.632-24.576-16.384-30.72-10.752-6.144-24.064-6.144-34.816 0.512-24.576 15.872-241.152 156.16-287.744 235.52-68.096 114.688-235.52 420.864-237.056 423.936-1.536 2.56-2.048 5.12-3.072 7.68l-91.648 158.72c-9.216 15.872-3.584 36.352 12.288 45.568 5.12 3.072 10.752 4.608 16.384 4.608 11.264 0 22.528-6.144 28.672-16.896L291.84 769.536c58.368-39.936 371.2-258.048 439.808-377.344z m-201.728-51.2c23.04-39.424 122.368-115.2 206.336-173.056-9.216 54.272-27.648 130.56-61.952 190.976-39.936 68.608-190.976 189.952-310.272 278.016 54.272-98.816 126.464-229.376 165.888-295.936z"
                    fill="#3E3A39"
                    p-id="1745"
                  />
                </svg>
              </span>
              <span class="spanHover">{{author}}</span>
            </b-col>
            <!-- 发布时间 -->
            <b-col cols="6" md="2">
              <span>
                <svg
                  t="1583652943458"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="2697"
                  width="25"
                  height="25"
                >
                  <path
                    d="M512 981.333333C251.733333 981.333333 42.666667 772.266667 42.666667 512S251.733333 42.666667 512 42.666667s469.333333 209.066667 469.333333 469.333333-209.066667 469.333333-469.333333 469.333333z m0-853.333333C300.8 128 128 300.8 128 512s172.8 384 384 384 384-172.8 384-384S723.2 128 512 128z"
                    fill="#4E4E4E"
                    p-id="2698"
                  />
                  <path
                    d="M512 554.666667c-23.466667 0-42.666667-19.2-42.666667-42.666667V256c0-23.466667 19.2-42.666667 42.666667-42.666667s42.666667 19.2 42.666667 42.666667v256c0 23.466667-19.2 42.666667-42.666667 42.666667z"
                    fill="#1296db"
                    p-id="2699"
                    data-spm-anchor-id="a313x.7781069.0.i6"
                    class="selected"
                  />
                  <path
                    d="M693.333333 736c-10.666667 0-21.333333-4.266667-29.866666-12.8l-181.333334-181.333333c-14.933333-17.066667-12.8-44.8 4.266667-59.733334 14.933333-12.8 40.533333-12.8 55.466667 0l181.333333 181.333334c17.066667 17.066667 17.066667 42.666667 0 59.733333-8.533333 8.533333-19.2 12.8-29.866667 12.8z"
                    fill="#1296db"
                    p-id="2700"
                    data-spm-anchor-id="a313x.7781069.0.i5"
                    class="selected"
                  />
                </svg>
              </span>
              <span class="spanHover">{{pubDate}}</span>
            </b-col>
            <!-- 浏览量 -->
            <b-col cols="6" md="2">
              <span>
                <svg
                  t="1583653264491"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="8074"
                  width="25"
                  height="25"
                >
                  <path
                    d="M460.8 885.6c-80.1-60.6-131.9-156.7-131.9-265 0-183.4 148.7-332.1 332.1-332.1 85.2 0 162.9 32.1 221.6 84.8"
                    fill="#1296db"
                    p-id="8075"
                    data-spm-anchor-id="a313x.7781069.0.i37"
                    class="selected"
                  />
                  <path
                    d="M783.6 783.7l-288.2 96.1V410.9l387.2 6.1 2 125.8-45.5 163.1z"
                    fill="#1296db"
                    p-id="8076"
                    data-spm-anchor-id="a313x.7781069.0.i36"
                    class="selected"
                  />
                  <path
                    d="M512.4 912.8c-54.4 0-107.2-10.7-157-31.7-48-20.3-91.1-49.4-128.2-86.4-37-37-66.1-80.1-86.4-128.2-21-49.7-31.7-102.5-31.7-157 0-54.4 10.7-107.2 31.7-157 20.3-48 49.4-91.1 86.4-128.2s80.1-66.1 128.2-86.4c49.7-21 102.5-31.7 157-31.7 54.4 0 107.2 10.7 157 31.7 48 20.3 91.1 49.4 128.2 86.4s66.1 80.1 86.4 128.2c21 49.7 31.7 102.5 31.7 157 0 54.4-10.7 107.2-31.7 157-20.3 48-49.4 91.1-86.4 128.2s-80.1 66.1-128.2 86.4c-49.8 21-102.6 31.7-157 31.7z m0-740.4c-90.1 0-174.7 35.1-238.4 98.8s-98.8 148.4-98.8 238.4c0 90.1 35.1 174.7 98.8 238.4s148.4 98.8 238.4 98.8c90.1 0 174.7-35.1 238.4-98.8s98.8-148.4 98.8-238.4c0-90.1-35.1-174.7-98.8-238.4s-148.3-98.8-238.4-98.8z"
                    fill="#515151"
                    p-id="8077"
                    data-spm-anchor-id="a313x.7781069.0.i33"
                    class
                  />
                  <path
                    d="M512.4 509.6m-92.6 0a92.6 92.6 0 1 0 185.2 0 92.6 92.6 0 1 0-185.2 0Z"
                    fill="#515151"
                    p-id="8078"
                    data-spm-anchor-id="a313x.7781069.0.i34"
                    class
                  />
                  <path
                    d="M481.8 129.1h61.1v146h-61.1zM481.8 750.7h61.1v146h-61.1zM128.6 482.4h146v61.1h-146zM750.2 482.4h146v61.1h-146z"
                    fill="#515151"
                    p-id="8079"
                    data-spm-anchor-id="a313x.7781069.0.i35"
                    class
                  />
                </svg>
              </span>
              <span class="spanHover">浏览量({{pageView}})</span>
            </b-col>
            <!-- 标签 -->
            <b-col cols="6" md="2">
              <span>
                <svg
                  t="1583653056690"
                  class="icon"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  xmlns="http://www.w3.org/2000/svg"
                  p-id="4331"
                  width="25"
                  height="25"
                >
                  <path
                    d="M541.2 632.8c-91.1 0-171.8 41.5-223.3 105.5l231.8 231.8c28.1 28.1 73.8 28.1 101.9 0l155.7-155.7c-37.9-105.6-142.6-181.6-266.1-181.6z"
                    fill="#1296db"
                    p-id="4332"
                    data-spm-anchor-id="a313x.7781069.0.i10"
                    class="selected"
                  />
                  <path
                    d="M970.2 549.8l-496-496a71.91 71.91 0 0 0-50.9-21.1c-2.4 0-4.9 0.1-7.3 0.4L126.9 62.6C92.9 66 66 92.9 62.6 126.9L33.1 416a71.99 71.99 0 0 0 20.7 58.2l495.9 495.9c14.1 14.1 32.5 21.1 50.9 21.1s36.9-7 50.9-21.1L970 651.6c28.3-28.1 28.3-73.7 0.2-101.8zM600.7 912.5l-491-491 28.8-283 283-28.8 491 491-311.8 311.8z"
                    fill="#454563"
                    p-id="4333"
                  />
                  <path
                    d="M310.8 210.4c-49.5 0-89.6 40.1-89.6 89.6s40.1 89.6 89.6 89.6 89.6-40.1 89.6-89.6-40.1-89.6-89.6-89.6z m0 102.4c-7.1 0-12.8-5.7-12.8-12.8 0-7.1 5.7-12.8 12.8-12.8 7.1 0 12.8 5.7 12.8 12.8 0 7.1-5.7 12.8-12.8 12.8z"
                    fill="#454563"
                    p-id="4334"
                  />
                </svg>
              </span>
              <span class="spanHover">
                <b-badge>{{tags}}</b-badge>
              </span>
            </b-col>
          </b-row>
        </b-container>
        <hr />
        <span style="margin-right:10px">
          <h6 style="display:inline-block;margin-right:20px;margin-left:10px">Share this:</h6>
        </span>
        <span style="margin-right:20px">
          <a
            href="http://service.weibo.com/share/share.php?url=http://baidu.com&title=Falcon"
            title="weibo"
            target="_blank"
          >
            <svg
              t="1584361608363"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="2391"
              width="36"
              height="36"
            >
              <path
                d="M468.076 829.906c-165.013 0-335.693-83.707-335.693-223.77 0-70.031 41.764-150.681 117.596-227.077 72.591-73.078 155.71-118.477 216.919-118.477 25.574 0 47.104 8.085 62.29 23.373 16.763 16.87 24.612 41.518 22.681 71.28l-0.542 8.515 8.12-2.616c28.841-9.282 55.398-13.983 78.96-13.983 48.482 0 72.449 19.856 84.02 36.516 10.189 14.628 19.947 40.53 8.632 80.845l-1.418 5.079 4.91 1.915c59.638 23.234 93.85 67.548 93.85 121.585-0.026 112.005-148.014 236.815-360.325 236.815z m-1.178-516.926c-38.543 0-109.071 31.852-179.743 103.01-65.065 65.556-102.38 134.855-102.38 190.146 0 105.851 147.052 171.372 283.3 171.372 187.945 0 307.892-109.22 307.892-184.412 0-48.973-49.664-69.801-71.02-76.483-8.822-2.667-22.072-6.671-28.943-20.895-4.603-9.543-4.506-20.577 0.317-32.793 8.74-22.14 9.83-39.665 3.093-49.357-6.293-9.052-20.854-14.039-41.011-14.039-25.19 0-57.82 7.91-91.89 22.272l-4.92 2.074h-0.68l-0.84 0.256c-5.525 1.705-10.752 2.575-15.534 2.575-11.054 0-20.828-4.726-26.84-12.969-3.7-5.064-9.123-16.02-3.855-32.502 8.643-27.99 7.972-50.544-1.797-60.375-5.227-5.222-13.68-7.88-25.15-7.88z"
                fill="#1296db"
                p-id="2392"
              />
              <path
                d="M439.163 753.377c-98.975 0-175.78-50.585-182.625-120.284-7.624-77.624 73.185-147.087 183.971-158.126a290.611 290.611 0 0 1 28.631-1.439c98.955 0 175.75 50.576 182.58 120.274 7.598 77.65-73.211 147.113-183.957 158.152a293.36 293.36 0 0 1-28.6 1.423z m29.967-233.252c-7.992 0-16.066 0.41-24.007 1.193-83.41 8.32-147.206 56.418-142.219 107.203 4.388 44.616 62.966 78.26 136.264 78.26 7.951 0 16.02-0.41 23.987-1.199 83.385-8.31 147.18-56.422 142.193-107.249-4.357-44.58-62.935-78.208-136.218-78.208z"
                fill="#1296db"
                p-id="2393"
              />
              <path
                d="M422.973 675.558c-6.302 0-12.441-0.962-18.242-2.841-13.21-4.301-23.153-12.959-28.001-24.402-4.64-10.952-4.107-23.301 1.505-34.78 9.574-19.559 31.846-32.702 55.424-32.702 5.115 0 10.143 0.64 14.945 1.9 13.84 3.594 24.93 12.206 30.444 23.618 5.166 10.701 5.156 23.03-0.02 34.73-8.915 20.305-31.96 34.477-56.055 34.477z m454.764-227.256a26.23 26.23 0 0 1-25.446-32.358 157.376 157.376 0 0 0 4.352-36.788c0-85.954-69.93-155.888-155.89-155.888-6.563 0-13.168 0.41-19.624 1.218a26.132 26.132 0 0 1-28.698-23.285l-0.005-0.036a26.122 26.122 0 0 1 22.303-28.693 211.64 211.64 0 0 1 26.025-1.607c114.852 0 208.282 93.44 208.282 208.291 0 16.605-1.961 33.127-5.827 49.101a26.138 26.138 0 0 1-25.431 20.05l-0.041-0.005z"
                fill="#1296db"
                p-id="2394"
              />
              <path
                d="M786.15 414.459a23.322 23.322 0 0 1-22.942-27.32c0.69-3.953 0.978-8.044 0.865-12.155a60.078 60.078 0 0 0-18.847-42.005 59.571 59.571 0 0 0-41.15-16.384c-0.619 0-2.61 0.041-2.61 0.041a23.091 23.091 0 0 1-23.179-22.482 23.23 23.23 0 0 1 6.339-16.804 23.107 23.107 0 0 1 16.261-7.296 106.276 106.276 0 0 1 76.329 29.072 105.964 105.964 0 0 1 33.413 74.526 107.612 107.612 0 0 1-1.541 21.535 23.276 23.276 0 0 1-22.927 19.282h-0.031v-0.01h0.02z"
                fill="#1296db"
                p-id="2395"
              />
            </svg>
          </a>
        </span>
        <span>
          <a
            href="javascript:;"
            @click="copyed"
            style="cursor:pointer"
            class="copy-link"
            data-clipboard-target="#wechat"
          >
            <svg
              t="1584361653223"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="3524"
              width="32"
              height="32"
            >
              <path
                d="M1024 619.52c0-143.36-138.24-256-307.2-256s-307.2 112.64-307.2 256 138.24 256 307.2 256c30.72 0 61.44-5.12 92.16-10.24l97.28 51.2-25.6-76.8c87.04-51.2 143.36-128 143.36-220.16z m-414.72-40.96c-30.72 0-51.2-20.48-51.2-51.2s20.48-51.2 51.2-51.2 51.2 20.48 51.2 51.2c0 25.6-25.6 51.2-51.2 51.2z m209.92 0c-30.72 0-51.2-20.48-51.2-51.2s20.48-51.2 51.2-51.2 51.2 20.48 51.2 51.2c0 25.6-25.6 51.2-51.2 51.2z"
                fill="#4CBF00"
                p-id="3525"
              />
              <path
                d="M358.4 609.28c0-158.72 153.6-286.72 348.16-286.72h15.36c-40.96-133.12-179.2-235.52-353.28-235.52-204.8 0-368.64 138.24-368.64 307.2 0 107.52 66.56 204.8 168.96 256l-30.72 92.16L256 686.08c35.84 10.24 71.68 15.36 112.64 15.36h10.24c-15.36-30.72-20.48-61.44-20.48-92.16z m138.24-414.72c35.84 0 66.56 30.72 66.56 66.56s-30.72 66.56-66.56 66.56C460.8 322.56 430.08 291.84 430.08 256S460.8 194.56 496.64 194.56zM245.76 322.56c-35.84 0-61.44-30.72-61.44-66.56s30.72-66.56 66.56-66.56 61.44 30.72 61.44 66.56-30.72 66.56-66.56 66.56z"
                fill="#4CBF00"
                p-id="3526"
              />
            </svg>
          </a>
        </span>
        <hr style="border:3px solid rgb(238, 238, 238) ; margin:20px auto;width:150px" />

        <!-- 评论区 -->
        <comments :essayComments="ecomments" :essayId="essayId"></comments>
      </b-col>
    </b-row>
    <!-- 剪切板地址，隐藏 -->
    <span id="wechat" style="opacity:0;position:absolute">http://baidu.com</span>
  </b-container>
</template>
<script>
// import spinner from "@/components/spinner";
import essay from "@/api/essay";
import comments from "./comments";
import Clipboard from "clipboard";

export default {
  components: {
    // spinner,
    comments
  },
  data() {
    return {
      author: "",
      pubDate: "",
      pageView: "",
      tags: "",
      imgSrc: "",
      title: "",
      content: "",
      ecomments: [],
      essayId: ""
    };
  },

  created() {
    this.fetchThatEssay();
  },
  mounted() {
    //初始化复制剪切板实例
    const clipboard = new Clipboard(".copy-link");
    clipboard.on("success", function(e) {
      console.log("复制成功");
      e.clearSelection();
    });
    clipboard.on("error", function() {
      console.log("复制失败");
    });
  },
  methods: {
    //获取文章
    fetchThatEssay() {
      this.essayId = this.$route.params.id;
      // this.$nextTick(() => {
      //   this.$refs.spinner.loading = true;
      // });
      essay.findEssay(this.essayId).then(response => {
        const resp = response.data;
        console.log(resp);
        if (resp.flag) {
          this.imgSrc = process.env.VUE_APP_SERVICE_URL + resp.data[0].img;
          this.title = resp.data[0].title;
          this.content = resp.data[0].content;
          this.pageView = resp.data[0].pageView;
          this.tags = resp.data[0].tag;
          this.author = resp.data[0].author;
          this.pubDate = resp.data[0].pubDate;
          this.ecomments = resp.comments;
          // this.$nextTick(() => {
          //   this.$refs.spinner.loading = false;
          // });
        } else {
          console.log("获取文章失败");
        }
      });
    },
    //复制分享链接成功
    copyed() {
      this.$notify({
        title: "链接已复制",
        message: "打开微信粘贴分享;-)蟹蟹支持",
        type: "success"
      });
    }
  }
};
</script>


<style lang="less" scoped>
.handimg {
  display: block;
  border-radius: 5px;
  width: 100%;
  height: auto;
}
hr {
  margin: 20px auto;
  width: 100%;
  border-radius: 5px;
}
@media screen and (min-width: 992px) {
  hr {
    margin-left: 0;
    width: 60%;
  }
  .handimg{
    width: 50%;
    height: 300px;
  }
}
.homeMain {
  .spanHover {
    color: gray;
    &:hover {
      color: rgb(18, 150, 219);
    }
  }
  background-color: #ffffff;
  margin: 2rem auto;
  border: 1px solid rgba(0, 0, 0, 0.05);
  border-radius: 0.3rem;
  box-shadow: 0 0 1px rgba(0, 0, 0, 0.1);
  padding-top: 1rem;
  // height: 1200px;
}
</style>